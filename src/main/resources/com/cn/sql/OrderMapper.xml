<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cn.dao.OrderMapper">
  <resultMap id="BaseResultMap" type="com.cn.vo.OrderEx">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
      <result column="Id" property="id" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result column="order_no" property="orderNo" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result column="type" property="type"  javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="start_time" property="startTime" javaType="java.util.Date" jdbcType="TIMESTAMP" />
      <result  column="tenancy" property="tenancy"  javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="start_address" property="startAddress" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="end_address"  property="endAddress" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result column="fetch_send"  property="fetchSend" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="flight_train"  property="flightTrain" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="single" property="single" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="fee"  property="fee"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="total"  property="total" jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="commission"   property="commission" jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result  column="status" property="status" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="remark"  property="remark" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="customer_id" property="customerId" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="customer_type" property="customerType" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="customer_name" property="customerName" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="customer_mobile"  property="customerMobile" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result column="customer_car_type" property="customerCarType" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="supplier_id"  property="supplierId" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="supplier_name" property="supplierName" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="car_id" property="carId" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="plate_number" property="plateNumber" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="car_type" property="carType" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="driver_id" property="driverId"  javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="driver_name" property="driverName" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="driver_mobile"  property="driverMobile" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result  column="create_time" property="createTime" javaType="java.util.Date" jdbcType="TIMESTAMP" />
      <result  column="last_opt_time"  property="lastOptTime"  javaType="java.util.Date" jdbcType="TIMESTAMP" />
      <association property="lastOptUser" javaType="com.cn.model.User">
      <id column="last_opt_id"  property="id" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result column="login_name" property="loginName" javaType="java.lang.String" jdbcType="VARCHAR"/>
      <result column="display_name" property="displayName" javaType="java.lang.String" jdbcType="VARCHAR"/>
    </association>
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    o.Id,o.order_no,o.type,o.start_time,o.tenancy,o.start_address,o.end_address,o.fetch_send,o.
    flight_train,o.single,o.fee,o.total,o.commission,o.status,o.remark,o.customer_id,o.customer_type,o.customer_name,o.
    customer_mobile,o.customer_car_type,o.supplier_id,o.supplier_name,o.car_id,o.plate_number,o.
    car_type,o.driver_id,o.driver_name,o.driver_mobile,o.create_time,o.last_opt_time,
    u.id as last_opt_id,u.login_name,u.display_name
  </sql>
  <select id="selectPageByEntity" parameterType="com.cn.vo.OrderEx" resultMap="BaseResultMap">
  <!--
    WARNING - @mbggenerated
    This element is automatically generated by MyBatis Generator, do not modify.
  -->
  select
  <include refid="Base_Column_List" />
  from t_order o
  left join t_user u on u.id=o.last_opt_id
  where 1=1
  <if test="orderNo!= null">
    and o.order_no='${orderNo}'
  </if>
  <if test="customerName!= null">
    and o.customer_name='${customerName}'
  </if>
  <if test="beginTime!= null">
    <![CDATA[AND  date_format(o.start_time,'%Y-%m-%d %H:%i') >= '${beginTime}' ]]>
  </if>
  <if test="endTime!= null">
    <![CDATA[AND   date_format(o.start_time,'%Y-%m-%d %H:%i')  <= '${endTime}']]>
  </if>
    <if test="status != null">
     And  o.status='${status}'
    </if>
    <if test="supplierName != null">
      And  o.supplier_name='${supplierName}'
    </if>

  order by o.start_time desc,o.create_time DESC
</select>
  <insert id="insert" parameterType="com.cn.vo.OrderEx">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_order
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        Id,
      </if>
      <if test="orderNo != null">
        order_no,
      </if>
      <if test="type != null">
        type,
      </if>
      <if test="startTime != null">
        start_time,
      </if>
      <if test="tenancy != null">
        tenancy,
      </if>
      <if test="startAddress != null">
        start_address,
      </if>
      <if test="endAddress != null">
        end_address,
      </if>
      <if test="fetchSend != null">
        fetch_send,
      </if>
      <if test="flightTrain != null">
        flight_train,
      </if>
      <if test="single != null">
        single,
      </if>
      <if test="fee != null">
        fee,
      </if>
      <if test="commission != null">
        commission,
      </if>
      <if test="total != null">
        total,
      </if>
      <if test="status != null">
        status,
      </if>
      <if test="remark != null">
        remark,
      </if>
      <if test="customerId != null">
        customer_id,
      </if>
      <if test="customerType != null">
        customer_type,
      </if>
      <if test="customerName != null">
        customer_name,
      </if>
      <if test="customerMobile != null">
        customer_mobile,
      </if>
      <if test="customerCarType != null">
        customer_car_type,
      </if>
      <if test="supplierId != null">
        supplier_id,
      </if>
      <if test="supplierName != null">
        supplier_name,
      </if>
      <if test="carId != null">
        car_id,
      </if>
      <if test="plateNumber != null">
        plate_number,
      </if>
      <if test="carType != null">
        car_type,
      </if>
      <if test="driverId != null">
        driver_id,
      </if>
      <if test="driverName != null">
        driver_name,
      </if>
      <if test="driverMobile != null">
        driver_mobile,
      </if>
      <if test="lastOptUser.id != null">
        last_opt_id,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="orderNo != null">
        #{orderNo,jdbcType=VARCHAR},
      </if>
      <if test="type != null">
        #{type,jdbcType=VARCHAR},
      </if>
      <if test="startTime != null">
        #{startTime,jdbcType=TIMESTAMP},
      </if>
      <if test="tenancy != null">
        #{tenancy,jdbcType=VARCHAR},
      </if>
      <if test="startAddress != null">
        #{startAddress,jdbcType=VARCHAR},
      </if>
      <if test="endAddress != null">
        #{endAddress,jdbcType=VARCHAR},
      </if>
      <if test="fetchSend != null">
        #{fetchSend,jdbcType=VARCHAR},
      </if>
      <if test="flightTrain != null">
        #{flightTrain,jdbcType=VARCHAR},
      </if>
      <if test="single != null">
        #{single,jdbcType=VARCHAR},
      </if>
      <if test="fee != null">
        #{fee,jdbcType=DECIMAL},
      </if>
      <if test="total != null">
        #{total,jdbcType=DECIMAL},
      </if>
      <if test="commission != null">
        #{commission,jdbcType=DECIMAL},
      </if>
      <if test="status != null">
        #{status,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="customerId != null">
        #{customerId,jdbcType=VARCHAR},
      </if>
      <if test="customerType != null">
        #{customerType,jdbcType=VARCHAR},
      </if>
      <if test="customerName != null">
        #{customerName,jdbcType=VARCHAR},
      </if>
      <if test="customerMobile != null">
        #{customerMobile,jdbcType=VARCHAR},
      </if>
      <if test="customerCarType != null">
        #{customerCarType,jdbcType=VARCHAR},
      </if>
      <if test="supplierId != null">
        #{supplierId,jdbcType=VARCHAR},
      </if>
      <if test="supplierName != null">
        #{supplierName,jdbcType=VARCHAR},
      </if>
      <if test="carId != null">
        #{carId,jdbcType=VARCHAR},
      </if>
      <if test="plateNumber != null">
        #{plateNumber,jdbcType=VARCHAR},
      </if>
      <if test="carType != null">
        #{carType,jdbcType=VARCHAR},
      </if>
      <if test="driverId != null">
        #{driverId,jdbcType=VARCHAR},
      </if>
      <if test="driverName != null">
        #{driverName,jdbcType=VARCHAR},
      </if>
      <if test="driverMobile != null">
        #{driverMobile,jdbcType=VARCHAR},
      </if>
      <if test="lastOptUser.id != null">
        #{lastOptUser.id,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.cn.vo.OrderEx">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_order
    <set>
      <if test="orderNo != null">
        order_no = #{orderNo,jdbcType=VARCHAR},
      </if>
      <if test="type != null">
        type = #{type,jdbcType=VARCHAR},
      </if>
      <if test="startTime != null">
        start_time = #{startTime,jdbcType=TIMESTAMP},
      </if>
      <if test="tenancy != null">
        tenancy = #{tenancy,jdbcType=VARCHAR},
      </if>
      <if test="startAddress != null">
        start_address = #{startAddress,jdbcType=VARCHAR},
      </if>
      <if test="endAddress != null">
        end_address = #{endAddress,jdbcType=VARCHAR},
      </if>
      <if test="fetchSend != null">
        fetch_send = #{fetchSend,jdbcType=VARCHAR},
      </if>
      <if test="flightTrain != null">
        flight_train = #{flightTrain,jdbcType=VARCHAR},
      </if>
      <if test="single != null">
        single = #{single,jdbcType=VARCHAR},
      </if>
      <if test="fee != null">
        fee = #{fee,jdbcType=DECIMAL},
      </if>
      <if test="total != null">
        total = #{total,jdbcType=DECIMAL},
      </if>
      <if test="commission != null">
        commission = #{commission,jdbcType=DECIMAL},
      </if>

      <if test="status != null">
        status = #{status,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="customerId != null">
        customer_id = #{customerId,jdbcType=VARCHAR},
      </if>
      <if test="customerType != null">
        customer_type = #{customerType,jdbcType=VARCHAR},
      </if>
      <if test="customerName != null">
        customer_name = #{customerName,jdbcType=VARCHAR},
      </if>
      <if test="customerMobile != null">
        customer_mobile = #{customerMobile,jdbcType=VARCHAR},
      </if>
      <if test="customerCarType != null">
        customer_car_type = #{customerCarType,jdbcType=VARCHAR},
      </if>
      <if test="supplierId != null">
        supplier_id = #{supplierId,jdbcType=VARCHAR},
      </if>
      <if test="supplierName != null">
        supplier_name = #{supplierName,jdbcType=VARCHAR},
      </if>
      <if test="carId != null">
        car_id = #{carId,jdbcType=VARCHAR},
      </if>
      <if test="plateNumber != null">
        plate_number = #{plateNumber,jdbcType=VARCHAR},
      </if>
      <if test="carType != null">
        car_type = #{carType,jdbcType=VARCHAR},
      </if>
      <if test="driverId != null">
        driver_id = #{driverId,jdbcType=VARCHAR},
      </if>
      <if test="driverName != null">
        driver_name = #{driverName,jdbcType=VARCHAR},
      </if>
      <if test="driverMobile != null">
        driver_mobile = #{driverMobile,jdbcType=VARCHAR},
      </if>
      <if test="lastOptUser != null">
        last_opt_id = #{lastOptUser.id,jdbcType=VARCHAR},
      </if>

    </set>
    where Id = #{id,jdbcType=VARCHAR}
  </update>


  <update id="updateTerminalOrder" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_order
    status ='5',
    where
  </update>
</mapper>